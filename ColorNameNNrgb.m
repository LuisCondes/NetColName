function [y1] = ColorNameNNrgb(x1)
% [y1] = ColorNameNNrgb(x1) takes these arguments:
%   x = 3xQ matrix, input #1
% and returns:
%   y = 11xQ matrix, output #1
% where Q is the number of samples.

% Input 1
x1_step1_xoffset = [-90;64;52];
x1_step1_gain = [0.00579710144927536;0.0109289617486339;0.0103092783505155];
x1_step1_ymin = -1;

% Layer 1
b1 = [-4.54211926803724;4.3718341989085143;-4.395142406299934;3.2394644222408653;-2.5213794577998807;-3.6468870683796384;-3.1234723023630648;-1.8805222750233668;2.5757189912512137;4.130063702726412;-2.2579796300730601;2.3064031941189529;-1.1597522320262472;0.29097910205313215;-1.9139056825262537;0.09876141390640647;-0.01660089306315167;0.52183764575356562;1.2746645289157272;0.48768509615318439;0.74710329507236661;0.65515565833660561;-2.5689059960816758;1.9531724698807085;-2.3747728640422512;1.9772750357430418;-2.0578140137389038;3.0519901318685503;3.3380019518167292;-2.533396515563572;-4.0636891890921714;4.0494697803008224;-4.05640442463491];
IW1_1 = [1.1826738522558191 -2.4699079149669005 -3.7197586391132957;-2.3879796584734843 2.3984198559791094 3.2741958207151263;3.3552748380178579 1.9293940422563922 1.7651286155421904;-3.7317539398771475 3.334140077469713 -1.6708814916087478;1.3833767876086056 1.2004573708049853 -4.7718848250772377;0.58124032123817582 2.4076422839008362 3.6395308809695308;1.2933626768306372 4.4836958150933306 -2.119303648945932;0.40679811051332376 -2.6381675944044547 4.5889526638807672;-2.8359110803093683 2.5695397224481433 1.7873879283252829;-5.6212475706057239 0.5838924677195142 0.32781290330474133;1.4644042715512384 3.8676230930799855 0.83523252859348984;-5.0780186918541279 2.9612162896883349 -0.1883259901034493;3.6315758713508988 -4.0518245985497217 1.8071409637823024;-1.4963991857017918 -2.3882661322444076 -3.2540960092719149;4.7368050254561558 -3.1937693620926346 0.64645729806955621;4.1478848248682993 -0.10599279239018243 2.7580672508634736;-1.3349335654952683 -3.9368620736900874 -0.47559069419597078;-3.828288350926103 -1.2504003919551954 3.57338743584828;2.2701945216334023 3.8824356648446026 0.25636280291152497;0.89351583168763482 1.2368137166487092 3.9181889711116824;-0.056561141280424138 3.8721280769254602 -4.4322715122543439;1.6976764469521033 -0.083456530420237443 -4.7897891750271944;-2.9020367023043576 -2.3950249493462126 -1.7500034169797336;2.7847897280674587 -1.6713047845698406 -4.1574024281546649;-1.7452888847814407 3.9567379437017851 1.601978006426543;3.8435800533214843 3.1123645719673503 0.63469969267235149;-0.77073735626642526 4.4881269925030276 -1.5478774161146602;3.7194372811599505 2.2542908435627345 -0.94433104135763535;3.133675699923776 -3.2110664471858614 -0.39803859765635197;-4.3434925470445753 -2.6312811541870937 -1.6833849350739765;-0.42965218142781125 -3.4916077160538346 -2.880140590580369;2.6255186834395889 -2.8614601535916275 -2.4263472147771701;-1.1980810540932989 -2.5718815516464471 -3.8524009491913906];

% Layer 2
b2 = [-0.02555167832201833;0.43879702047959873;0.044420829726146846;-0.9319069547638672;1.1417278202270171;1.3440594853613326;0.0093845294734198476;-0.51478644461793843;-0.30824233985498911;0.31615381968659778;0.8728408145597274];
LW2_1 = [0.81776822111240544 -1.029636872838297 -0.50799860880899783 -1.8604809130831377 0.056625750848583623 -1.0755933556194535 -0.69074709252753985 -0.1065098410796376 -0.43304394319163297 -1.8894538512277936 0.051156010044617124 -0.13755414208813135 0.47642491194451381 0.45452017041156073 0.81359279116803862 1.4562942125496052 0.27145240204187188 -0.30711131050506285 0.10242058780407173 -0.35506004820374837 0.37605629427968179 -0.48312795472935316 -1.5684752858689075 1.0313672031236494 -0.63744095790138067 -0.16209837256264781 0.5449426108548695 0.35485978424752168 0.73162296274843241 -0.99390401703614983 0.40407300248813821 -0.57580473551900557 -0.10483590302437229;1.1499067471277558 -1.5116497097396395 -1.2328427600011367 1.3703941023165855 0.58960774009533223 -0.52678791748062581 0.22038531201057035 -1.0935157013439558 -1.2551875441249603 -2.0578610319360409 1.1376450680847219 -1.1546482774040532 1.0074035358480924 -0.39608760683254102 1.5174352832331668 0.81926558387374226 -1.080225296309034 0.37389916576877313 2.1148159317732298 0.67734732759740057 1.6929639100396328 2.2822062592434991 0.24154661847847811 0.25648408510021858 -0.19861750183393254 0.31356532298080225 -0.24555498778308796 0.42291698142559225 -0.6668757784488264 0.088068209831439176 0.18578355538923289 -0.89357318596840529 0.009397784747171109;0.88298940122461578 -0.2489522212153526 1.2423242647685906 1.3450049271084596 0.70202149162032501 1.3848937469990097 0.8709514673180796 -1.9273958499485739 -0.53066270147224248 1.1126957860334556 0.28163184666209201 -0.73784764415594584 0.18634605161116485 -0.13856448527934237 1.2092899438333915 -1.74869865107198 -0.63500671859944158 -2.2365506035760108 0.072814584070720625 -0.70442616353343968 1.69389788644788 -0.38848898318474301 -0.35589965838775012 1.6690033304305925 -1.2478131208533914 0.10339041065452564 -0.49402681466916432 1.5837130305673432 -0.40907061853134163 -1.6539346678276818 1.0513751852111695 -0.17441544481889676 0.12547108990138861;-0.25173625916941261 1.0076204462064875 0.74875440849026631 0.31648266757260957 1.1699346934392663 -1.7062437804631247 3.3835656771445315 -1.7918689214088659 -0.43634245843678032 0.80316647901515248 0.87163176547957011 -0.76428327541502439 -1.4092732525310647 0.56170014643518107 -0.20551436666513992 0.91457683666208545 -1.0550317636432098 0.10906390795553446 0.019493330949107449 -0.43103590791682977 0.31023143381380869 0.51504688947157307 -0.48017798527752514 1.1335029898401694 -0.24596086982702348 0.041527400473907045 0.80115879242989319 -0.71011236672559364 -0.9856984699373339 -0.48146011376355585 -0.79713348947843599 0.61459040375989837 -0.06368192697022379;-0.93316739417732464 -0.092442032228532922 0.14072891346393365 -0.15001454250511623 0.50930585758547631 0.22400616243620475 0.5979748938278705 -1.9792581519858059 0.82149385174259004 3.115356026369374 0.45548751735591536 4.1772359344267969 -3.9547971025744171 -0.1642622173727025 -3.7978251065685926 -2.3661896561515472 0.56219300975968811 -1.479302754441252 0.71102793733274472 -1.3898354482050139 3.6121417323577978 -0.34883704431340085 0.044826090338301414 -0.31635783832122344 0.8849116654886795 1.3140650184730429 -0.45925480615134578 -0.10060381011944224 0.16352533017284282 -1.094899045424091 0.42757699972004787 -0.71311341935280448 0.64981466584880299;-0.29536714469890302 0.6897196393136904 -1.7393664726537423 0.84728513628066093 -0.77211390366579347 -0.54777048596451505 -0.82246373849787702 0.78971926739612408 0.68457324583140011 1.9460638530282302 -0.23843174080956683 2.5673101234472386 -0.39309849976905842 0.16816928497043462 -2.0501228265765534 0.330342902724924 1.4642989969616991 4.031168687859731 -0.65116061454328034 0.22994558623721884 -1.2651931200304591 -2.6387191538253121 -0.41524379597501582 -2.3578119501085109 0.53000042063416064 -0.64097852415091172 -0.41622562857960049 0.051377125792667885 -0.53204503324607988 0.79105026994114258 -1.3640163311060884 -0.47142293622594372 0.049898977036319084;-0.8282512887489889 1.0027248345065765 -0.59695269350543301 -0.13483595640019813 -1.450832497851605 1.0454876289739714 -1.4378831193131729 1.3762270337187117 -0.23634735082519209 0.92647656448285942 0.11542799118174354 -1.5093151682231443 2.2972344189568354 0.28986621251328537 2.0312897116322763 0.034188612238285433 0.901053717669274 0.90600018257072013 -1.6674624958674313 -0.11553100281874847 -4.0208538368278361 -1.33270973853085 -0.23675594191472224 -0.2126688701880412 -1.0025761516082812 0.021067758112620197 -0.73394365419199237 -0.5838971710609564 -0.16115409616523838 0.93963350993208195 -0.84703053157031882 0.077659207162437655 0.21589061278767951;0.17167510022995022 -0.85221815666643663 0.97320876261837874 -1.6438361916588524 -2.5604435571955988 -1.1651202725016394 -1.8105311168546616 0.44134124380284318 0.24160179109139682 -4.2847483939442856 -0.59418316969928009 -2.3250481226242923 2.1634576645060637 -1.2090360128035857 1.5490616804903339 0.30503208164120649 -0.53347450117649642 -1.3657691106568235 0.48639144780938137 1.0630250039911098 -2.0319540550818687 1.1747874878350857 -0.80329238570675154 1.1990012482758552 0.25453736567089036 -0.22583239516883416 -0.41140817533030855 0.21206748595349639 -0.96516529925974692 0.27098183143110455 0.81165737259949144 -0.81596328170672683 -0.49763137610440078;0.71454561388083959 0.26314241110195552 0.83084793391302125 0.64327503869604463 -0.19941542098100953 0.66639676827167016 2.024214752846587 0.91348915903012662 0.91860833994688451 -1.5264207804464909 -0.40097699312304108 -0.01139094874206288 -0.30624433749821678 -0.97348134182091717 0.12239967802605577 -0.56419836118511069 0.17087599347585403 0.88135276025982601 0.042811010193727253 0.77030693392907534 -0.80471778053245913 0.53846027697781085 -0.57875854026215112 -1.2761223479329895 0.91981721467356881 -0.56757038600591692 -0.48149915460192738 -0.50317739552372376 0.36236837641018416 -0.34896385699074817 0.099508799884999263 -0.84097415540991305 -0.46604934596187231;-0.84674477372665169 0.88519733976658643 -0.52411436789138977 -0.19154149365892237 -1.562727139797824 -0.46592633839560071 -1.4302225229962293 1.3966060316175968 1.1943174517721376 2.1732234509017609 -0.50267634220797075 0.97309233379667459 0.82064722439515025 0.21644573378411225 0.96555659186642395 -0.60799341728331524 0.69435604815363694 -0.35550932628447324 0.37105111982962574 0.53528516651735647 0.75542764397797113 0.36368131720318231 0.24841431803947986 -1.3966460523603499 0.12324052647534881 0.68528314513182453 -0.74720624687861315 0.54562631083612179 0.55852403540843387 0.12093421903516403 0.039535204615960058 0.097443092225564534 -0.30473279060015146;-0.25468453791939466 0.48521744785250903 -0.40613372745686227 1.552424971136098 -0.38187978592802257 0.26312160570998833 -1.3093264867299452 -0.11666075097777452 -0.65196029705816805 0.79768039252550516 0.032402795456113964 0.31114056487897446 1.0402568137934449 0.51452855187458058 0.4976590775960078 -0.092271246934501755 -0.38786204076673159 0.65539318922808287 -0.86876775462232614 0.12482928671330071 -0.61522779301229247 0.86722522345880426 1.0778770918556628 -0.1515146042107505 -0.095919641052164412 -1.3905807874559113 0.31926410341205586 0.37531163398099171 -0.64647082058787542 1.1910063921763177 0.40844210520445223 0.79724786236909462 1.3637951562734265];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
y = bsxfun(@minus,x,settings_xoffset);
y = bsxfun(@times,y,settings_gain);
y = bsxfun(@plus,y,settings_ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numer = exp(n);
denom = sum(numer,1);
denom(denom == 0) = 1;
a = bsxfun(@rdivide,numer,denom);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
