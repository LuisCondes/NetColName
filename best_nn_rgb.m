function [y1] = best_nn_rgb(x1)
%BEST_NN_RGB neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 19-May-2016 21:14:52.
% 
% [y1] = best_nn_rgb(x1) takes these arguments:
%   x = 3xQ matrix, input #1
% and returns:
%   y = 11xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [-90;64;52];
  x1_step1_gain = [0.00579710144927536;0.0109289617486339;0.0103092783505155];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [13.140897960102908;4.1917772014531636;0.71747103983119065;-3.9727897535304924;1.013834869977341;-4.6785943998822672;3.5579139513147116;-1.3275993419774252;-5.5506236214874427;2.6176062444898522;5.4931131932863577;-0.75925068730954814;-5.8678599965384803;-5.1332170383401943;1.2957166009169883;5.7327497250949335;3.0094602165711457;1.1273543736914813;-5.5477914855014845;-5.0451091256524183;-2.7042986107014193;4.5781062768382554;-0.72973576238512416;-3.9780408428538387;-3.7257301010346211;1.7576445289187139;-0.22436135967958598;8.3324267762745947;2.9041868306216045;-3.3256892003791543;-2.3974436970535811;-0.025219334227371552;1.6811021962678052;-0.018878180991821931];
  IW1_1 = [-0.61011244903005846 -5.3484043969046429 -7.0364828437250324;-2.480310137665636 -3.1065620281238973 1.9141463532127532;-1.3854682926315982 6.1578588122598186 -5.3895453353955496;8.6200751589550464 -6.7344042296077182 1.7507454898755193;0.1255643081165688 5.2658584513272864 -6.0998889833422272;6.2849893456431882 -0.7746539386201603 -0.54937632898038091;-7.8182181468333463 6.4606656055054792 -3.5607378747308713;2.5135669403911844 3.488919385019928 -4.6414715334925392;13.007179652184774 -7.2512683179767352 0.92403878637297676;-2.2505620697999014 -2.5610401153712754 1.374545751980127;-11.666787407525556 11.550458312626185 -4.6811128299575548;1.5149430729937166 0.53688289842086268 -2.4766232739114176;13.606670561236987 -6.1893918694383618 -0.80976369227586087;10.754129048547016 -10.143561263655403 4.2291042277212547;-1.0269984376710359 -4.9518569430102515 4.5518140960650486;-10.586360048585263 -1.1618515299891192 5.4341717025206888;-9.2515254988831455 4.0512289605131349 1.2748997452672066;-1.5338660253412901 -2.0781710798095356 4.0354849223668223;13.322137855522749 -6.1072978050704689 -0.36815142648489807;4.3954658409453584 -8.7780115943828001 9.6745147573728989;6.8766997022404368 -3.2096819464266151 -0.95974509277579301;-6.8471000787436243 -0.20165336851671792 1.6176115989221374;1.1102908026861773 -6.217889060287157 5.2136554946848124;9.3080893876652144 -9.167196587041575 4.3623104408128972;0.24758825026670522 5.4178006066428752 0.28249687533198814;-5.7451566685960982 -3.1964632387727354 5.6805842851454891;0.39759637337926285 1.5726236648870151 0.444317690073462;-8.0725394761099416 4.7414570906751541 -4.1975832180713057;-2.6690713053050619 -1.6515161682617823 1.2645130886026952;4.5500184719450925 -6.0171540290735566 5.1278115562870834;1.6072705995278238 -4.4976001302999107 1.8552259289838673;4.7525072874598182 -1.8640581588469218 2.008756436494842;-2.1286562075303923 0.5083330042446188 1.7239926370014467;-5.595241686166311 2.7376362412360948 -2.3976701433746919];
  
  % Layer 2
  b2 = [-0.99293850825605934;-1.0967386105221226;-0.89567616010850371;-0.54194901903523296;-0.75237831016637613;-0.18904018875953371;-0.66362690520898171;-1.0646296130555777;-0.41259278448867565;-3.6098612523126432;1.3721736330516903];
  LW2_1 = [-0.2280072773787602 -0.17832980137116691 0.74887412078679216 -0.027419499793005061 0.11037477096894827 0.54350796293717418 0.20049291602146921 -0.37965301159141912 -0.17018591487873774 -0.8952077514770842 0.11339044021515507 -0.70694951559340335 0.15566142104031122 -0.062087688397613562 -0.10025220548154076 0.031293013183320263 -0.017902642789753603 -0.768078074036459 0.068611856926303783 -0.5080809815470636 -0.13501247436269176 0.0039521275891348101 0.84863410853191423 0.22314431398017306 0.0021185613268498503 -0.016306276835381012 0.022995307163932204 0.35686922082739375 1.6741085109615292 0.66773647455671203 0.11322255227719918 0.21151707266940573 -0.30443861973782582 0.14625124639226375;0.29777030518209419 1.4680314269420538 0.422419057371272 0.5376593062438616 -0.016823338349722491 0.72521848484690588 -0.19218136359615393 -0.5083998096320379 -0.53087104758749748 0.60493842827898792 0.4600515008230871 -0.34341901060270696 -0.051051537805615305 0.23946269767818115 -0.20166549253745608 0.064000578339798248 -0.039966177862635767 -0.46026961018308649 0.37347076284453556 0.074699116887518374 -0.26411802010543184 0.62165333690572433 0.39336461328412703 0.031408028659113331 -0.059141144991530573 -0.083561818206574254 -0.053426815886344028 0.16285198230843406 -2.3847859329800296 -0.29696297427354901 0.024579420237565004 0.11200423834078498 -0.23238568548228783 0.020125324006190982;0.35675960175334576 -0.65334516435817991 0.65096659804145618 0.44191371899500392 -0.20358168058329962 -1.4321004073242156 -0.023042508872462557 0.75986629060190913 0.83756153954997581 0.18442909319422346 -0.42415536323135294 -0.10212898901885858 1.0059551865557721 -1.3154047545495156 0.52817036875646395 -0.24282285828580152 0.35494583549168951 0.19985196245265158 -1.1674087635354 -0.014751412212954493 -0.33174795844215438 -0.67323312988320672 0.3734077897839656 0.80268078543014931 0.26438470691673693 0.057807880861392748 0.042074704445799076 -0.41284770958300177 0.38112940756425701 -0.27340664466878639 -0.11825409259370059 -0.66007538867579674 -0.33406494871955922 -0.65526574761833256;0.26751918324386581 -0.78653075484397605 0.21268773227463178 -0.75721763937852526 -0.046180247502472675 0.048412409261237146 -0.020402759165401577 -0.026348869837052175 0.80360703453167071 0.54388663324613473 -0.5284998058075806 0.10177475913484378 0.024634982690214875 -0.22960402795955442 0.0064127894936416409 -0.032416456246770309 0.12865619606409204 -0.074597004330667058 -0.5738313494229188 -0.011400636244028463 0.50369194090957847 0.019585777001110062 0.21100872663800299 -0.14740829979311476 0.19314051936601428 0.014869096748502805 0.039744557106711396 0.036322468264636136 -0.33039148467971319 -0.022026704998276442 0.021642313104816645 0.17340569952431942 0.22606402722252153 0.13677264800141392;-0.15805072145176077 -0.11311600983534921 1.2258547766748653 -0.16781994293612257 0.9304303759530288 0.16846306171760431 -0.35183083609533733 -0.37411580630592178 -0.97547633942387657 -1.0977906251840992 1.4512963275912611 0.17281428291645878 -0.71653892614607961 2.8029626512567396 -0.28946278063005443 0.15628516461932587 -0.20271958277106705 0.2175584936015835 1.0750446170748986 0.26315441735344042 -0.017887204640197971 0.2094543261885258 1.1067160251249633 -1.6001342345960756 -0.24362316934489844 -0.17476004350327615 -0.33350020888416887 -0.15700552098309634 1.4860042662427497 0.35246956535577195 -0.22657635591888881 0.20433049147737256 0.15275271469043222 0.11601857897448969;-0.007902860020466234 0.44843486642278418 -0.46981989356364479 -0.011887650428706745 -1.2880857922022444 -0.33182813459539529 -0.33390819266814481 0.7484539884032998 0.072371295878315617 0.69356000137221996 -1.1474916866597993 -0.47477841012196764 0.91190563728921681 -1.5771993984927408 0.52815390420623876 -0.32705382981059489 0.63680853891901146 -0.28010089754189166 -1.1716571521441288 -0.32719280742106743 0.11943449132293589 -0.18347624653918387 -0.81569674827899663 0.1393763369569864 0.14764523673070132 0.22683205809515344 0.2695324758745789 0.15054244188813462 -1.3020777376819337 -0.00072955324837440142 0.13040525422905114 -1.6365531778446358 -0.39026661380210736 -1.5668063557884973;-0.11264298693700857 -0.37921185188897522 0.81399622289328144 0.10551923523609673 -0.23074691509500192 -0.14023808583515557 -0.67354079458811134 0.27925508788453396 0.24168895895592915 -0.51094851050109291 -0.78092175588464685 0.48997614478830837 1.9290209639761178 0.16507904999036824 -0.25881625692979587 0.44860770193395644 -1.4286182680224353 0.4089900456834728 -1.4165910847149221 -0.049946102824941573 -1.9421554147846192 0.0099644429917441057 0.65904538923163614 -1.4345690072601296 -0.080305372126809216 0.45851993687585801 0.071637008011067052 0.16723001244309962 0.84020516870599082 0.32667791599647822 -0.057533199810260324 -0.26011240107437383 -0.17632580602272305 -0.29775735374215645;0.36957924011671667 0.013095112163130303 -1.6287517098712214 -0.029866102454911149 0.026509105997059329 0.0099536012067819053 0.15642710074045618 0.38642826615019327 -0.053719947169431501 0.27110362952109412 -0.29959804970704151 0.94240002400381384 -1.514186116192932 0.2334626956316192 0.31235220935632685 -0.33364816866307889 1.0158263761271824 0.94387096753879429 0.98294089004243912 0.34183683637680834 1.7889377833365034 -0.058158084295121738 -1.5827248827550571 -0.38002383941682993 -0.17890582267674773 -0.21964240352449316 -0.048348110622546459 -0.45680371395058972 -0.39284630171884405 -0.13803821483342493 -0.17411091551302185 0.10555172313932699 0.85116081732369475 0.2531750164312262;-0.17272087346942597 0.34234249430798097 -0.4021309478517246 0.072290434477340446 0.24342643076981077 -0.1702606240223431 0.1330465068475731 -0.26659805072930942 0.057856892963967003 0.66487758833066946 -1.0728565313549161 -0.076253310110951392 0.092905765493096357 -1.3184153509207073 -0.31055310421734206 0.0064924225148929541 -0.18053423947237107 -0.0074323826748990624 -0.19381848579532585 0.13879538221205254 -0.13887252822650425 -0.19894842425009135 -0.20740033913208986 0.34160928776279181 0.074437037004260256 0.027217233393954508 0.61391348356575348 0.1338143948644791 -0.7930894959786613 -0.15255476697401141 0.49429185653287944 -1.6072386798047817 -0.25032366213839224 -1.1443804523940124;1.5677536720830767 -0.16865255216049987 -1.6551576346600623 -0.17047446580669079 0.49356995569784595 0.66719460034522104 1.1680551234916376 -0.69156393734771948 -0.33104198019376396 -0.63546056381861316 2.3191469018890714 -0.04134658045004988 -2.2190218178878935 1.2504954558150432 -0.23844317769217152 0.24582871402505882 -0.10186580759977423 -0.26791725093727692 2.3706405552699534 0.12023042491808521 0.6898883399033906 0.29437157466712749 -1.0344536387449612 1.9931807086948869 -0.12828093517877476 -0.29512945726012058 -0.65171294699602011 0.043481544517089327 1.026175778731194 -0.49266266833371508 -0.24158101903157045 3.4649928094302505 0.46128031803056302 3.0783138528363696;-2.3031294014386656 0.039682953136171532 0.1037866950944857 0.0098738105050261218 -0.02042572757577343 -0.072158204629852132 -0.07303515059020893 0.059962045664732469 0.051657665428110865 0.22448574454461748 -0.098613268208182212 0.0310121720373416 0.40038226134035854 -0.20487276466247337 0.017742080937840059 -0.016031944709244524 -0.172685368495756 0.077624294768873697 -0.36819012659000677 -0.026997059015250506 -0.28487361600021177 -0.029065856192091261 0.068913469237850647 0.032124497621776653 0.012531069516845655 0.0026553656274431129 0.032254559445492562 -0.020909944810618013 -0.30787690295405101 0.021342851342984082 0.039776169391828091 -0.11674648229931653 -0.0083932532245129619 -0.094591624124307702];
  
  % Output 1
  y1_step1_ymin = -1;
  y1_step1_gain = [2;2.06185567010309;2;2.04081632653061;2;2;2;2;2.01005025125628;2;2.11640211640212];
  y1_step1_xoffset = [0;0;0;0;0;0;0;0;0;0;0];
  
  % ===== SIMULATION ========
  
  % Dimensions
  Q = size(x1,2); % samples
  
  % Input 1
  xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
  
  % Layer 1
  a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);
  
  % Layer 2
  a2 = repmat(b2,1,Q) + LW2_1*a1;
  
  % Output 1
  y1 = mapminmax_reverse(a2,y1_step1_gain,y1_step1_xoffset,y1_step1_ymin);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings_gain,settings_xoffset,settings_ymin)
  x = bsxfun(@minus,y,settings_ymin);
  x = bsxfun(@rdivide,x,settings_gain);
  x = bsxfun(@plus,x,settings_xoffset);
end
